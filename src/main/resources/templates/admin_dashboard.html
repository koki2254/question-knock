<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>管理者ダッシュボード</title>
    <style>
        body { font-family: sans-serif; padding: 2rem; background-color: #f9f9f9; }
        .container { max-width: 900px; margin: 0 auto; background: #fff; padding: 2rem; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { margin-top: 0; }
        table { width: 100%; border-collapse: collapse; margin-top: 1.5rem; }
        th, td { border: 1px solid #ddd; padding: 0.75rem; text-align: left; }
        th { background-color: #f4f4f4; }
        tr:nth-child(even) { background-color: #f9f9f9; }
        /* ↓↓↓ .btn-delete と .btn-disabled を削除し、これに置き換え ↓↓↓ */
        .btn-delete-request {
            background-color: #ffc107; /* 警告の黄色 */
            color: #212529;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            text-decoration: none;
            font-size: 0.9rem;
        }
        .btn-delete-request:hover {
            background-color: #e0a800;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>管理者ダッシュボード</h1>
        <div style="margin-bottom: 2rem; border-bottom: 1px solid #ddd; padding-bottom: 1rem;">
        <a th:href="@{/admin/tags}" style="margin-right: 15px; font-size: 1.1rem;">分野(タグ)を管理する</a>
        <a th:href="@{/admin/questions/new}" style="font-size: 1.1rem;">新しい問題を追加する</a>
        <!-- ★ 追加：問題一覧へ -->
    	<a th:href="@{/admin/questionlist}" style="font-size: 1.1rem;">問題一覧へ</a>
    	<!-- ★★★ 新しく追加：CSV一括登録ページへ ★★★ -->
	    <a th:href="@{/admin/questions/csv-upload}" style="font-size: 1.1rem; color:#007bff;">
	        CSVで問題を一括登録する
	    </a>
        </div>
        
        <p>ようこそ、<span th:text="${#authentication.name}">（管理者名）</span>さん。</p>

        <div th:if="${errorMessage}" class="message error" th:text="${errorMessage}"></div>
        <div th:if="${successMessage}" class="message success" th:text="${successMessage}"></div>

        <h2>管理者アカウント一覧</h2>
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>氏名</th>
                    <th>メールアドレス</th>
                    <th>操作</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="admin : ${admins}">
                    <td th:text="${admin.adminId}">1</td>
                    <td th:text="${admin.adminName}">管理者 太郎</td>
                    <td th:text="${admin.email}">i.nakano1123@gmail.com</td>
                    <td>
                        <span th:if="${admin.email == loggedInEmail}">（ログイン中）</span>
                        
                        <a th:if="${admin.email != loggedInEmail}"
                           th:href="@{'mailto:operator@questionknock.com?subject=管理者アカウント削除リクエスト&body=' + '削除を希望するアカウントのメールアドレス: ' + ${admin.email}}"
                           class="btn-delete-request">
                           削除リクエスト
                        </a>
                        
                        </td>
                </tr>
            </tbody>
        </table>

        <form th:action="@{/admin/logout}" method="post" class="logout-form">
            <button type="submit" class="logout-btn">ログアウト</button>
        </form>
    </div>
</body>
</html>